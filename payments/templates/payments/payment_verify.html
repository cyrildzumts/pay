{% extends "payment_base.html"%}
{% load i18n %}

{% block MAIN %}

<div class="container">
    <div class="responsive">

        <form  name="voucher-recharge" action="{% url 'payments:payment-verification' %}" method="POST">{% csrf_token %}
            <div class="form-group">
                {% if form and form.verification_code.errors %}
                    <ul class="errorlist">
                        {% for e in form.verification_code.errors %}
                        <li >{{e | escape}}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
                <label for="verification-code">{% trans "Verification Code" %} : </label>
                <input id="verification-code" type="text" name="verification_code">
                
            </div>
            <div class="form-group">
                {% if form and form.operator_reference.errors %}
                    <ul class="errorlist">
                        {% for e in form.operator_reference.errors %}
                        <li >{{e|escape}}</li>
                        {% endfor %}
                    </ul>
                {% endif %}
                <label for="operator-reference">{% trans "Operator reference" %} : </label>
                <input id="operator-reference" type="text" name="operator_reference">
            </div>
                {% if form and form.errors %}
                        <ul class="errorlist">
                            {% for e in form.errors %}
                            <li >{{e|escape}}</li>
                            {% endfor %}
                        </ul>
                {% endif %}
            
            <div class="form-group row row-right">
                <a class="mat-button mat-button-text" href="{% url 'payments:payment-home' %}"> {% trans "Cancel" %} </a>
                <button class="mat-button mat-button-default" type="submit">{% trans "Verify" %}</button>
            </div>
        </form>

    </div>
        
    {% if payment_verification_ready and payment_verification_ready is True %}
    <div class="responsive">
        {% if payment_is_valid %}
            <div class="box">
                <p> {% trans "Sender" %} : {{payment.sender.get_full_name}} </p>
                <p> {% trans "Recipient" %} : {{payment.recipient.get_full_name}} </p>
                <p> {% trans "Price" %} : {{payment.amount}} {% trans "XAF" %} </p>
                <p> {% trans "Date" %} : {{payment.created_at}} </p>
                <p> {% trans "Description" %} : {{payment.details}} </p>
            </div>
        {% else %}
            <div class="box">
                <p> {% trans "No payment found." %} </p>
            </div>
        {% endif %}
    </div>

    {% endif %}
</div>
{% endblock MAIN %}